---
title: "Utilisation du package AntaresFlowbased "
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

Le package antaresFlowbased permet de lancer des études **flowbased** à partir du logiciel antares.

## 1 - Initialisation de l'étude :

L'initialisation de l'étude se fait via la fonction *initFlowBased()*. Cela se traduit par l'écriture des 4 fichiers suivant dans le répertoire */user/flowbased*, ainsi que la modification temporaire de la configuration du projet : 

* second_member.txt
* weight.txt
* scenario.txt
* ts.txt

Cette fonction utilise par défaut des fichiers présents dans le package. Ces fichers contiennent 12 jours types issus d'un clustering sur des domaines historique avec :

* une période historique s'étallant de Novembre 2015 à Janvier 2017
* une pondération plus forte des domaines aux heures de pointes.



Avant toute chose, il est nécéssaire d'indiquer l'étude antares sur laquelle nous souhaitons travailler via la fonction *setSimulationPath()* du package **antaresRead** :

```{r, eval=FALSE}
antaresRead::setSimulationPath("D:/exemple_test", 0)

# initialisation de l'étude flowbased
initFlowBased()
```


## 2 - Lancement des simulations

Préalablement, il est nécéssaire d'indiquer l'emplacement du solver antares via la fonction *setSolverAntares()* :

```{r, eval=FALSE}
# chemin du solver antares
setSolverAntares(path = "C:/Program Files/RTE/Antares/5.0.9/bin/antares-5.0-solver.exe")

# affichage du solver renseigne
getSolverAntares()
```

Finalement, la fonction *runSimulation()* lance l'étude flowbased, en simulant les différents scénarii avant d'aggréger les résultats.

```{r, eval=FALSE}
res_fb <- runSimulation(simulationName = "flowBased-Tuto")
```

Les paramètres possibles sont les suivants : 

* **simulationName** : Nom de la simulation
* **mcAll** : Calcul de la vision synthétique, fichiers mc-all (TRUE ou FALSE)
* **mcInd** : Conservation de la vision année par année, fichiers mc-ind (TRUE ou FALSE)
* **mcYears** : mcYears à conserver, par défaut tous (équivalent à une playlist)
* **opts** : Projet antares (obtenu avec la fonction setSimulationPath). Par défaut celui chargé dans l'environnement global
* **verbose** : Niveau de logs dans la console R (0, 1 ou 2) par défaut 1.

Les résultats des simulations sont alors consultables directement dans antares et/ou lisible avec le package antaresRead.
